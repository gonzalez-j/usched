<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>ysched by gonzalez-j</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">ysched</h1>
      <h2 class="project-tagline">Fast and easy scheduling for Lua</h2>
      <a href="https://github.com/gonzalezjo/ysched" class="btn">View on GitHub</a>
      <a href="https://github.com/gonzalezjo/ysched/zipball/master" class="btn">Download .zip</a>
      <a href="https://raw.githubusercontent.com/gonzalezjo/ysched/master/ysched.lua" class="btn">Download .lua</a>
    </section>

    <section class="main-content">
      <h1>
<a id="ysched" class="anchor" href="#ysched" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ysched</h1>

<hr>

<p><strong>Docs</strong></p>

<h6>
<a id="yieldfunction-condition-optional-function-callback-optional-callback-arguments" class="anchor" href="#yieldfunction-condition-optional-function-callback-optional-callback-arguments" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>yield(function condition, (optional) function callback, (optional) callback arguments)</code>
</h6>

<p>If only a condition is passed, resume execution after condition is met. If a function callback is provided, call that function after with the arguments specified by the optional callback arguments list. Additional callback arguments can be provided by passing additional arguments to yield. Allows for easy creation of custom yieldfunctions.</p>

<h6>
<a id="waitfloat-seconds" class="anchor" href="#waitfloat-seconds" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>wait(float seconds)</code>
</h6>

<p>Calls the custom yield function with a function that waits for the amount of seconds provided. Uses os.clock() as a time source. Resumes execution after the amount of seconds that has been passed.</p>

<h6>
<a id="spawnfunction-createasync" class="anchor" href="#spawnfunction-createasync" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>spawn(function createasync)</code>
</h6>

<p>Create a function and add it to the scheduler thread, so it runs "asynchronously". </p>

<hr>

<p><strong>Usage</strong></p>

<p>There are two ways of using ysched. You can directly launch scripts using it, or you can just require it from your script. </p>

<h6>
<a id="direct-launch" class="anchor" href="#direct-launch" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Direct Launch</h6>

<p>Use lua (or luajit) in the commandline with the first argument being ysched.lua and the second being the script you want it to manage. As an example, you can load <code>TARGETFILE.lua</code> in the scheduler with: <code>luajit ysched.lua TARGETFILE.lua</code></p>

<h6>
<a id="requiring" class="anchor" href="#requiring" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Requiring</h6>

<p>Put ysched in the same folder as your script, and then add: </p>

<div class="highlight highlight-source-lua"><pre><span class="pl-c1">require</span> <span class="pl-s"><span class="pl-pds">"</span>ysched<span class="pl-pds">"</span></span></pre></div>

<p>to the top of your script. </p>

<hr>

<p><strong>Code Examples</strong></p>

<h6>
<a id="input" class="anchor" href="#input" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Input</h6>

<div class="highlight highlight-source-lua"><pre><span class="pl-c1">require</span> <span class="pl-s"><span class="pl-pds">"</span>scheduler<span class="pl-cce">\\</span>ysched<span class="pl-pds">"</span></span>
<span class="pl-c1">print</span> <span class="pl-s"><span class="pl-pds">"</span>Start<span class="pl-pds">"</span></span>

<span class="pl-k">local</span> variable <span class="pl-k">=</span> <span class="pl-c1">5</span>

<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>Line 5: <span class="pl-pds">"</span></span> <span class="pl-k">..</span> <span class="pl-c1">os.clock</span>())

<span class="pl-c1">spawn</span>(<span class="pl-k">function</span>()
    <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>Line 8: <span class="pl-pds">"</span></span> <span class="pl-k">..</span> <span class="pl-c1">os.clock</span>())
    <span class="pl-c1">yield</span>(<span class="pl-k">function</span>() <span class="pl-k">return</span> variable <span class="pl-k">==</span> <span class="pl-c1">10</span> <span class="pl-k">end</span>, print, <span class="pl-s"><span class="pl-pds">"</span>'variable' is <span class="pl-pds">"</span></span> <span class="pl-k">..</span> variable)
    <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>Line 10: <span class="pl-pds">"</span></span> <span class="pl-k">..</span> <span class="pl-c1">os.clock</span>())
<span class="pl-k">end</span>)

<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>Line 13: <span class="pl-pds">"</span></span> <span class="pl-k">..</span> <span class="pl-c1">os.clock</span>())
<span class="pl-c1">wait</span>(<span class="pl-c1">3</span>)
<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>Line 15: <span class="pl-pds">"</span></span> <span class="pl-k">..</span> <span class="pl-c1">os.clock</span>())
variable <span class="pl-k">=</span> <span class="pl-c1">10</span>
<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>Line 17: <span class="pl-pds">"</span></span> <span class="pl-k">..</span> <span class="pl-c1">os.clock</span>())</pre></div>

<h6>
<a id="output" class="anchor" href="#output" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Output</h6>

<pre><code>Start
Line 5: 0
Line 13: 0
Line 8: 0
Line 15: 3
Line 17: 3
'variable' is 10
Line 10: 3.001
lua: scheduler\ysched.lua:70: Execution complete.
</code></pre>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/gonzalezjo/ysched">ysched</a> is maintained by <a href="https://github.com/gonzalezjo">gonzalez-j</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
